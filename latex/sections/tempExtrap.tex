\begin{document}

Global climate change and the greenhouse effect is often a reocurring political subject. From 1722-2013, the Swedish Meteorological and Hydrological Institute (SMHI) has collected daily temperature measurements from uppsala, Sweden. This data will be used to show the distribution of the yearly average temperature in uppsala from 1723-2013. Further more, analysis of this data will provide a moving average of the yearly average temperature. The moving average will be fitted with a $a(x-1840)\cdot cos(bx)$ function, trying to se if the future temperature is not only increasing, but actually oscillating more violently correlated to the human development since the industrial revolution in 1840.

\subsection{Method}
Dailytemperatures were read from raw data and put into a multi dimensional vector according to the readData function. After this was called from \texttt{tempExtrap} a simple for loop converted this into a 2-D data vector containing year and temperature, with one entry for each day. This data vector was made in two different variants. One containing all values from the uppsala data set, assuming a measurement was taken for every day. Another containing only the measurements from the uppsala location.

The next step was to calculate the yearly averages from the data. For the uppsala only data, this was done by \texttt{averages1}. This iterated through all the elements of the data vector. If the year of the current element was not larger than the previous, then the temperature of the current element was added to a temperature sum and the number of days counted was incremented. When the current year became larger than the previous, the previous year was pushed into a dummy vector along with the average temperature. This dummy vector was then pushed into another vector, creating a 2D averages vector containing one element per year with that year's average temperature.

For the complete set of data, the first year, 1722, was skipped because its measurement started after the 1st of January. After 1722 the data vector was iterated in steps of the years with two nested for loops. In the outer loop, if the year was a leap year, an inner for loop iterated from day 1 to 366 and pushed the average temperature and the year into a dummy vector, into an averages vector. And similarly if the year was not a leap year, it was then iterated 365 times and the average was calculated appropriately.

With the data of yearly averages at hand, it was processed for plotting. To do this, the total average temeperature from all the yearly average temperatures was calculated. With a for loop iterating through the data elements and simple if statements, the average temperatures and corresponding year were pushed into one vector containing all temperatures above the total average, and one vector containing those below. These two new vectors are not used for further analysis, but purely used for plotting.

The average temperature vector was then used to calculate a moving average. The goal of this moving average is to take the yearly averages in groups and take the average yearly temperature for that group. This will make it easier to fit. Similarly ot the other average functions, this iterated through the average vector and for each element added the temperature. If the iteration counter was the size of the desired group size, then the average of the average temperatures was pushed into a vector for the y-values. For the x-values, the current year, the middle of the group, corresponded to the initial year, plus the number of groups so far times the group size. Plus half a group size. If the number of years is not divisible by the group size then the last years will not be represented. This is accomodated by outside the for loop push the current value of the sum.

These moving average y- and x-values were then put into a \texttt{TGraph} object, and a fit function was added to this graf. The function was of the form $A*(x-1840)*cos(B*x))$, where A and B are parameters. The graph, the fit were then plotted together with the above and belov vectors, as bar graphs, mentioned earlier.

The main function \texttt{tempEx} then returned the value of the fit function evaluated at the desired year.

\subsection{Results and Conclusion}

\begin{figure}[ht]
\begin{center}
\includegraphics[scale=0.35]{extrapolatedDataFit.jpg}
\caption{\label{fig:extrap1}}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[scale=0.35]{notleap.jpg}
\caption{\label{fig:extrap2}}
\end{center}
\end{figure}

The results show a somewhat periodically oscillating average yearly temperature around 5.9 Celcius. The fit achieves a $\chi ^2=1.2$, which is surprisingly good for such a simplistic model. Extrapolating with this function, $0.005(x-1840)cos(0.125x)$ gives an average temperature of 5.88 Celcius year 2050. In conclusion, the yearly temperatures do in fact oscillate over time. However, it is clearly seen in the data that at in the more recent years have been concistently warmer and a more proper model, using global data could most likely show proof of global warming. It is interesting to see that such a simple model as ours does make a good fit with the data. It is also interesting that such a temperature increase can be seen in data just obtained in the Stockholm region. 





\end{document}